<HTML>
<HEAD>
<TITLE>CM Modula-3: Overriding package locations</TITLE>
<LINK HREF="/cm3/normal.css" REL="stylesheet" TYPE="text/css"></head>
<body>

<H2>Overriding package locations</H2>
<P>

<B> override(P, D) </B>  
          Use the version of package <TT>P</TT> in directory <TT>D/P</TT>
          instead of the one in <TT>/pkg/P</TT>.
 
<P>

<TT>override</TT> alters the behaviour of the <TT>include_pkg</TT> and
<TT>import_pkg</TT> procedures, and must be executed prior to any such calls
to have an effect.
<P>

To help ensure that the public repositories are consistent,
<TT>m3ship</TT> will refuse to install any package built using overrides.
<P>

When the <TT>-override</TT> option is specified, <TT>cm3</TT> looks for a file
named <TT>m3overrides</TT> in the <TT>src</TT> directory and, if one
exists, executes it immediately prior to executing <TT>m3makefile</TT>.
By keeping all <TT>override</TT> calls in an <TT>m3overrides</TT> file
and not in an <TT>m3makefile</TT>, you can build both private and public
versions of packages without editing any files.
<P>

The overrides in effect when a package was built are automatically
carried forward into importers of the package, so there is no need to
restate the complete set of overrides at every level, only of those
packages that are directly imported into a given package.
<P>

There is a  pre-declared variable, <TT>WDROOT</TT>, that
defines the conventional location of a user's private package repository.
(see <a href="./machine.html#WDROOT">WDROOT </a>).
<P>

</BODY>
</HTML>
