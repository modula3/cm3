<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: zeus/src/ZeusSnapshot.i3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>zeus/src/ZeusSnapshot.i3</H2></A><HR>
<inInterface>
<PRE></PRE> Copyright 1992 Digital Equipment Corporation. 
 Distributed only by permission. 
 Last modified on Thu Sep 23 16:05:38 PDT 1993 by mhb    
      modified on Wed Jun 23 15:05:40 PDT 1993 by steveg 
      modified on Fri Feb  5 20:37:12 PST 1993 by johnh  
<PRE>&lt;* PRAGMA LL *&gt;
</PRE> This internal interface provides the ZeusPanel snapshot and restore
   facilities. 

<P><PRE>INTERFACE <interface><A HREF="ZeusSnapshot.m3.html">ZeusSnapshot</A></interface>;

IMPORT <A HREF="../../libm3/derived/RefList.i3.html">RefList</A>, <A HREF="../../libm3/src/rw/Rd.i3.html">Rd</A>, <A HREF="../../libm3/src/rw/Wr.i3.html">Wr</A>, <A HREF="ZeusPanelPrivate.i3.html">ZeusPanelPrivate</A>;

CONST
  HomeDir = &quot;HOME&quot;;
  StateDir = &quot;.zeusState&quot;;
  FinalState = &quot;Final_State&quot;;   (* filename for state at &quot;Quit&quot; *)

PROCEDURE <A HREF="ZeusSnapshot.m3.html#SessionToStateDir">SessionToStateDir</A> (sess  : ZeusPanelPrivate.Session;
                             report: BOOLEAN                    := TRUE)
  RAISES {};
  &lt;* LL = VBT.mu *&gt;

PROCEDURE <A HREF="ZeusSnapshot.m3.html#SessionFromStateDir">SessionFromStateDir</A> (panel : ZeusPanelPrivate.T;
                               name  : TEXT;
                               report: BOOLEAN := TRUE): BOOLEAN RAISES {};
  &lt;* LL = VBT.mu *&gt;

PROCEDURE <A HREF="ZeusSnapshot.m3.html#Snapshot">Snapshot</A> (panel : ZeusPanelPrivate.T;
                    file  : TEXT;
                    report: BOOLEAN              := TRUE) RAISES {};
  &lt;* LL = VBT.mu *&gt;

PROCEDURE <A HREF="ZeusSnapshot.m3.html#SnapshotToWr">SnapshotToWr</A> (panel : ZeusPanelPrivate.T;
                        wr  : Wr.T;
                        report: BOOLEAN          := TRUE) RAISES {};
  &lt;* LL = VBT.mu *&gt;

PROCEDURE <A HREF="ZeusSnapshot.m3.html#FinalSnapshot">FinalSnapshot</A> (panel : ZeusPanelPrivate.T) RAISES {};
  &lt;* LL = VBT.mu *&gt;
  (* Snapshot to default place at Zeus exit. *)

PROCEDURE <A HREF="ZeusSnapshot.m3.html#Restore">Restore</A> (panel : ZeusPanelPrivate.T;
                   file  : TEXT;
                   report: BOOLEAN              := TRUE) RAISES {};
  &lt;* LL = VBT.mu *&gt;

PROCEDURE <A HREF="ZeusSnapshot.m3.html#RestoreFromRd">RestoreFromRd</A> (panel : ZeusPanelPrivate.T;
                         rd    : Rd.T;
                         report: BOOLEAN              := TRUE;
                         file  : TEXT                 := NIL   ) RAISES {};
  &lt;* LL = VBT.mu *&gt;
  (* Restore(p, file) == RestoreFromRd(p, FileStream.OpenRead(file)) *)
  (* The file argument is just to be used in error messages. *)

PROCEDURE <A HREF="ZeusSnapshot.m3.html#RestoreFromList">RestoreFromList</A> (panel : ZeusPanelPrivate.T;
                           list  : RefList.T;
                           report: BOOLEAN      := TRUE) RAISES {};
  &lt;* LL = VBT.mu *&gt;
  (* RestoreFromRd(p, rd) == RestoreFromList(p, Sx.Read(rd)) *)

PROCEDURE <A HREF="ZeusSnapshot.m3.html#InitialRestore">InitialRestore</A> (panel : ZeusPanelPrivate.T) RAISES {};
  &lt;* LL = VBT.mu *&gt;
  (* Restore from default place at Zeus startup. *)
</PRE> Procedures to save and restore panel and algorithm data, ignoring
   views completely, under the assumption that the sessions at the time
   of snapshot can be mapped to those in panel.sessions at the time of
   restoration, in the same order. 

<P><PRE>PROCEDURE <A HREF="ZeusSnapshot.m3.html#GrabDataList">GrabDataList</A>(panel: ZeusPanelPrivate.T): REFANY;
  (* Returns a list. *)

PROCEDURE <A HREF="ZeusSnapshot.m3.html#RestoreData">RestoreData</A>(panel: ZeusPanelPrivate.T; list: RefList.T);
  (* Restores from a list. *)

END ZeusSnapshot.
</PRE>
</inInterface>
<PRE>























</PRE>
</BODY>
</HTML>
